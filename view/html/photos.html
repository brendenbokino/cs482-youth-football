<!DOCTYPE html>
<html lang="en-us">

    <head>
        <meta charset="utf-8">
        <meta name="keywords" content="football, youth league, sports">
        <title>Loyal Order of Youth League Athletes</title>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
        <!-- Bootrap Icons for the Icons -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">        
        <link href="./css/main.css" rel="stylesheet" type="text/css">
        <style>
            img {
                max-width: 100%; /* Image will not exceed 100% of its container's width */
                height: auto; /* Height adjusts proportionally to maintain aspect ratio */
                display: block; /* Removes extra space below the image */
            }
        </style>
        

        </head>

    <body>
        <div id="header"></div>

            <main>
                <div>
                    <h1>Mongo File Uploads</h1>
                    <form action="/upload" method="POST" enctype="multipart/form-data">
                        <div class="custom-file mb-3">
                            <input type="file" name="file" id="file">
                            <label for="file">Choose File</label>
                        </div>
                        <input type="submit" value="submit" class="btn btn-primary btn-block">
                    </form>
                    <div id="imageList" class="img"></div>
                    <hr>
                    <script>
                        async function showImages() {
                            const response = await fetch('/photos/images');
                            const files = await response.json();

                            const imageList = document.getElementById('imageList')
                        if (files){
                            for (let file of files) {
                                
                                imageList.innerHTML += '<div class="card card-body mb-3">';
                                if (file.isImage) {
                                    imageList.innerHTML =
                                    `<img src="http://localhost:3000/image/${file.filename}" alt="">`;
                                }else{
                                    imageList.innerHTML =
                                    `${file.filename}`;
                                }
                                imageList.innerHTML += '<\div>'
                            }
                        } else{
                            document.getElementById("id").innerHTML += 
                            '<p>No files to show</p>';
                        }
                        }
                        showImages();
                    </script>
                </div>
            </main>

            <div id="footer"></div>
            <!-- JQuery JS -->
        <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
        <!-- Bootstrap Bundle JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
        <script> 
            $(function(){
                $("#header").load("header.html"); 
                $("#footer").load("footer.html"); 
            });
        </script>
        </body>
</html>

